% entete
%%!TEX TS-program = latex
\RequirePackage{etex}
\documentclass[c]{beamer}

% Package
\usepackage[utf8]{inputenc} % UTF-8
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[frenchb]{babel} % francisation
\usepackage{amssymb} % the amsfont symbols
\usepackage{multicol} % Multi-colonnes
\usepackage{calc} % Opérations
\usepackage{cancel} % draw diagonal lines
\usepackage{units} % typesetting units and nice fractions
\usepackage{wrapfig} % allows figures or tables to have text wrapped around
\usepackage{pst-all,pst-eucl}
\usepackage{wasysym} % Symbole Euro
\DecimalMathComma
\usepackage{animate}

% Donnee
\title{##{{TITRE}}##}
\author{##{{AUTEUR}}##}
\institute{##{{ETABLISSEMENT}}##}
\date{##{{DATEACTIVITE}}##}

% Fonction
\newcounter{exo}

\newcommand \question{
  \only<1>{
    \refstepcounter{exo}
	\stepcounter{nocalcul}
	\begin{center}
		\begin{minipage}{50mm}
		      \begin{block}{}
		            \begin{center}
		                  \textbf{Question \theexo}
		            \end{center}
		      \end{block}
		\end{minipage}
	\end{center}
    \transduration{1}}
  \only<2>{
    \frametitle{Question \theexo \hfill \progress}
    \transduration{2}}}

\newcommand \progress{
  \begin{animateinline}[poster=none, autoplay]{##{{TEMPSFRAME}}##}
    \multiframe{50}{i=1+1,dbleu=0.1cm+0.1cm}{%
      \begin{pspicture}(0,0)(5,0.5)
        \psframe*[linecolor=white,framearc=0.2](0,0)(5,0.3)
        \ifnum \i>20
          \ifnum \i>40
            \psframe*[linecolor=red,framearc=0.2](0,0)(\dbleu,0.3)
          \else
            \psframe*[linecolor=orange,framearc=0.2](0,0)(\dbleu,0.3)
          \fi
        \else
          \psframe*[linecolor=green,framearc=0.2](0,0)(\dbleu,0.3)
        \fi      
        \ifnum \i=50
          \rput[b](2.5,0){Attention !!!}
        \fi
      \end{pspicture}}
  \end{animateinline}}

\newcommand \corrige{
  \only<1>{
    \refstepcounter{exo}
	\stepcounter{nocalcul}
	\begin{center}
		\begin{minipage}{50mm}
		      \begin{block}{}
		            \begin{center}
		                  \textbf{Corrigé \theexo}
		            \end{center}
		      \end{block}
		\end{minipage}
	\end{center}}
  \only<2>{
    \frametitle{Corrigé \theexo}}}

% Theme
\usetheme{Warsaw}
\setbeamertemplate{navigation symbols}{}
\setbeamersize{text margin left=0.5cm}
\setbeamersize{text margin right=0.5cm}

\begin{document}
\newcounter{nocalcul}[exo]
\renewcommand{\thenocalcul}{\Alph{nocalcul}}

\begin{frame}
	\titlepage
	\begin{center}
	Vous avez ##{{TEMPSSLIDE}}## secondes par question
	\end{center}
\end{frame}

% fin entete


% sujet

\begin{frame}
\question{}
\only<2->{
\begin{exampleblock}{##{{2}}##}
    ##{{3}}##
\end{exampleblock}
}
\end{frame}

% fin sujet


% corrige

\begin{frame}
\corrige{}
\only<2->{
\begin{exampleblock}{##{{2}}##}
   ##{{4}}##
\end{exampleblock}
}
\end{frame}

% fin corrige


% pied

\begin{frame}
	\begin{center}
		\begin{minipage}{50mm}
		      \begin{block}{}
		            \begin{center}
		                  \textbf{FIN}
		            \end{center}
		      \end{block}
		\end{minipage}
	\end{center}
\end{frame}

\end{document}

% fin pied